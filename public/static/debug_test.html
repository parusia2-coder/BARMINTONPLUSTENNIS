<!DOCTYPE html>
<html>
<head><title>Debug Test</title></head>
<body>
<h2>Click Test</h2>
<div id="results" style="white-space:pre-wrap; font-family:monospace; background:#f0f0f0; padding:20px; max-height:600px; overflow-y:auto;"></div>
<script>
const log = (msg) => { 
  document.getElementById('results').textContent += new Date().toISOString().substr(11,8) + ' ' + msg + '\n'; 
  console.log('[DEBUG] ' + msg);
};

// Fetch the main page and analyze rendered HTML
fetch('/')
  .then(r => r.text())
  .then(html => {
    log('Main page fetched OK, length=' + html.length);
    
    // Check if app.js is loaded
    const hasAppJs = html.includes('/static/app.js');
    log('Has app.js script tag: ' + hasAppJs);
    
    // Check style.css
    const hasStyleCss = html.includes('/static/style.css');
    log('Has style.css link: ' + hasStyleCss);
    
    // Now fetch app.js and check for key functions  
    return fetch('/static/app.js').then(r => r.text());
  })
  .then(js => {
    log('app.js fetched OK, length=' + js.length);
    
    // Check key functions exist
    const funcs = ['toggleAdminPanel', 'showAuthModal', 'switchTab', 'navigate', 'render', 'openTournament', 'showSponsorManager', 'showToast'];
    funcs.forEach(f => {
      const exists = js.includes('function ' + f);
      log('  function ' + f + ': ' + (exists ? 'FOUND' : 'MISSING'));
    });
    
    // Check for syntax errors by evaluating in a try-catch
    log('');
    log('Attempting to detect obvious JS issues...');
    
    // Count open/close braces
    const openBraces = (js.match(/{/g) || []).length;
    const closeBraces = (js.match(/}/g) || []).length;
    log('  Open braces: ' + openBraces + ', Close braces: ' + closeBraces + (openBraces === closeBraces ? ' (BALANCED)' : ' (MISMATCH!)'));
    
    // Count open/close parens
    const openParens = (js.match(/\(/g) || []).length;
    const closeParens = (js.match(/\)/g) || []).length;
    log('  Open parens: ' + openParens + ', Close parens: ' + closeParens + (openParens === closeParens ? ' (BALANCED)' : ' (MISMATCH!)'));
    
    // Check for common issues
    const hasUseStrict = js.includes("'use strict'") || js.includes('"use strict"');
    log('  use strict: ' + hasUseStrict);
    
    // Check if DOMContentLoaded listener exists
    const hasDCL = js.includes("DOMContentLoaded");
    log('  DOMContentLoaded: ' + hasDCL);
  })
  .catch(e => log('ERROR: ' + e.message));
</script>
</body>
</html>
